<!doctype html>
<html lang="en">

<head>
        <title>SAS program to Python tool - OptumAI Microsite</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        
        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="../assets/css/dracula-ui.css">
        <link rel="stylesheet" href="../assets/css/mkdocs.css">
            <link href="../stylesheets/extra.css" rel="stylesheet">

        
            <link  rel="icon" type="image/x-icon" href="../assets/img/favicon.ico">
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                <script>hljs.initHighlightingOnLoad();</script>

</head>

<body class="drac-bg-black-secondary drac-text-grey-ternary drac-text drac-scrollbar-purple">

    <main class="d-flex">

        <!-- block sidebar -->
            <nav id="sidebar" class="sidebar drac-bg-black">
    <div class="custom-menu">
        <button type="button" id="sidebarCollapse" class="btn btn-primary">
            <i class="fa fa-bars"></i>
            <span class="sr-only">Menu</span>
        </button>
    </div>

    <div class="p-4">
        
            <img class="logo" src="../img/optum.png" height="150px">
        

        <div class="drac-text-center">
            
                <span class="drac-text drac-line-height drac-text-white">OptumAI Microsite</span>
            
        </div>

        <div class="drac-box flex-column">
            <ul class="dot-ul">
                <li><div class="dot-li drac-bg-cyan"></div></li>
                <li><div class="dot-li drac-bg-green"></div></li>
                <li><div class="dot-li drac-bg-orange"></div></li>
                <li><div class="dot-li drac-bg-pink"></div></li>
                <li><div class="dot-li drac-bg-purple"></div></li>
                <li><div class="dot-li drac-bg-red"></div></li>
                <li><div class="dot-li drac-bg-yellow"></div></li>
            </ul>
        </div>

        <hr class="drac-divider" />

        <!-- block menu -->
        <ul class="mb-5 drac-list drac-list-none">
            
            <li class="drac-box">
                <a href=".."
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Home
                </a>
            </li>
            <li class="drac-box">
                <a href="../Member%20Assessment%20with%20Digital%20Twin/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Member Assessment with Digital Twin
                </a>
            </li>
            <li class="drac-box">
                <a href="../RFP%20Response%20Generation%20Tool/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    RFP Response Generation Tool
                </a>
            </li>
            <li class="drac-box">
                <a href="./"
                    class=" active 
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    SAS program to Python tool
                </a>
            </li>
        </ul>
        <!-- endblock -->
    </div>
</nav>
        <!-- endblock -->

        <nav class="divider drac-bg-purple-cyan"></nav>

        <div class="content">
            <!-- block header -->
                <header>
    <nav class="navbar navbar-expand-xl drac-bg-purple"">
        <div class="container-fluid">

            <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
                aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button> -->

            <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
                <ul class="navbar-nav">

                    <!-- block preview -->
                    <li class="nav-item">
                            
        <div class="container">
            <div class="row row-preview">
                <div class="col">
                    <a href="../RFP%20Response%20Generation%20Tool/"
                        class="btn-preview drac-btn drac-btn-outline drac-text-white drac-text-cyan-green--hover">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </div>
                <div class="col">
                    <a 
                        class="btn-preview drac-btn drac-text-white--hover disabled" style="padding-left: 3%;">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
                    </li>
                    <!--  endblock -->

                    <!-- block search -->
                    <li class="nav-item">
                    </li>
                    <!--  endblock -->

                    <!-- block source -->
                    <li class="nav-item">
                        
                    </li>
                    <!--  endblock -->

                </ul>
            </div>

        </div>
    </nav>
</header>
            <!-- endblock -->

            <!-- block content -->
                <section class="p-md-5 section-content">
    <article>
        <p><div><h1 id="sas-program-to-python-tool">SAS program to Python tool</h1>
<p>Contact: Prassanna Venkatesh <a href="mailto:venkatesh_prassanna@optum.com"><span style="color: blue;">email</span></a> / Sandeep Sharma <a href="mailto:sandeep.sharma@optum.com"><span style="color: blue;">email</span></a></p>
<h2 id="overview">Overview</h2>
<p>In today's data-driven landscape, organizations are increasingly adopting Python as their primary programming language for data analysis and statistical modeling. Python offers an extensive range of libraries and frameworks, making it a popular choice among data professionals worldwide. However, SAS, with its long-standing history in the analytics domain, still holds a significant amount of legacy code. So, converting SAS code to Python using LLMs gives us the opportunity to modernize our workflows and leverage Python's rich ecosystem.</p>
<p>Many teams at UHG have been using SAS codes for decades and they have been inherited by those teams from long time back. Also, they don’t have enough comments that explain the code structure. In order to give more context, the LLM models can be used to convert the SAS code to Python.</p>
<h2 id="business-benefits">Business Benefits</h2>
<ol>
<li>
<p>Estimated savings of ~$14 Million annually on the licensing costs of SAS, since Python is open source.</p>
</li>
<li>
<p>Direct positive impact on the work of 22+ teams at UHG that rely on SAS code.</p>
</li>
</ol>
<h2 id="stakeholders">Stakeholders</h2>
<p>Business Partners - UHC HCE, EDM / ICRC.</p>
<h2 id="role-of-optumai">Role of OptumAI</h2>
<p>By converting SAS code to Python, OptumAI will help the teams at UHG to reduce their reliance on SAS software and licenses, resulting in cost savings. Also, in addition to automating the code conversion process, OptumAI also comes up with the concept of self-repair that handles and fixes both the compilation and run-time errors in the generated code.</p>
<p>We believe, this solution will support UHG’s Code Modernization efforts, making it easier to maintain, enhance, and integrate the legacy systems with the new systems and technologies.</p>
<h2 id="solution-approach">Solution Approach</h2>
<p>Below is a simple representation of our solution architecture.</p>
<p><img alt="img" src="../img/img1.png"></p>
<p>We propose a three-stage process to migrate the SAS code to Python.</p>
<h3 id="stage-i">Stage I:</h3>
<p>The SAS code, which is the user input is passed as prompt to the LLM along with additional information regarding the code.</p>
<h3 id="stage-ii">Stage II:</h3>
<p>The model generates the SAS code with proper comments, that provides better understanding and readability of the code. It also accepts user feedback as a prompt regarding the commented code here.</p>
<h3 id="stage-iii">Stage III:</h3>
<p>The model takes the commented SAS code as input along with user input prompt (if any) and passes it to the LLM. Then it generates appropriate python code with proper naming conventions, comments in the code and imports all the necessary libraries. After this, the generated code is corrected through our self-repair mechanism.</p>
<p>Steps in self-repair mechanism:</p>
<ol>
<li>
<p>Generated code is saved in a python file.<br></p>
</li>
<li>
<p>Create a virtual environment, activate it, and then generate the Requirements.txt file (using pip freeze or pipreqs).  </p>
</li>
<li>Install relevant packages in the virtual environment (bandit, pylint).</li>
<li>Check the vulnerabilities in code and code quality using the tools installed.</li>
<li>Next, we use the generated Requirements.txt file that contains the packages needed to execute the generated python code and install the packages in the virtual environment created. If any vulnerability is found, we pass an input prompt to the LLM to modify the code accordingly.</li>
<li>In the next step, we check for compilation and run time errors in the code. Once the packages are installed, we compile the generated code. If any error raises, we trace it back, pass the error as prompt to LLM and ask it to regenerate the code.</li>
<li>If there is no error, we execute the code using exec function and check for run time errors. If no errors are found in the code, we move forward to next steps. If error is found, we use traceback function and pass the error as prompt to LLM. In this phase, we have a Human-In-The-Loop (HITL) mechanism where user can include any instructions if necessary to the model and those instructions will also be included in the prompt.</li>
<li>Once the code passes all these tests, the virtual environment is deactivated and deleted. The generated code is displayed as output, along with the vulnerability information, and compilation status in the UI.</li>
</ol>
<h1 id="weekly-sprint-progress">Weekly Sprint Progress</h1>
<p><img alt="img" src="../img/img2.png"></p>
<h1 id="reference">Reference</h1>
<p>Github Repo - <a href="https://github.optum.com/dkarth10/code_convertor/"><span style="color: blue;">click here</span></a></p>
<p>Aha Idea - <a href="http://127.0.0.1:8000/"><span style="color: blue;">click here</span></a></p>
<p><div class="video-container"><iframe src="../vid/SAS-to-Python.mp4" style="position:relative;width:100%;height:22.172vw" frameborder="0" allowfullscreen alt="type:video"></iframe></div></p></div></p>
    </article>
</section>
            <!-- endblock -->

            <!-- block footer -->
                <footer>
    <div class="d-flex flex-sm-row justify-content-between py-2 border-top drac-text-black drac-bg-cyan-green">
        <a href="https://github.com/dracula/mkdocs" target="_blank" style="padding-left: 1%;"
            class="footer-text drac-anchor drac-text-black drac-text-purple--hover">
            Made with Dracula Theme for MkDocs
        </a>
    </div>
</footer>
            <!-- endblock -->
        </div>

    </main>

        <script>var base_url = '..';</script>
        <script src="../assets/js/jquery-3.3.1.slim.min.js""></script>
        <script src="../assets/js/bootstrap.bundle.min.js""></script>
        <script src="../assets/js/mkdocs.js""></script>

</body>

</html>
